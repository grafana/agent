metrics scraper "default"  {
    targets = [
        {
            targets = [{ "__address__" = "localhost:9001"}]
            labels = {}
        }
    ]
    receivers = [metrics.remote_write.default.receiver, metrics.remote_write.rw2.receiver]
}


// Each metrics_forwarder is implemented as a WAL + zero or more remote_writes.
metrics remote_write "default" {
  external_labels = {
    cluster = "flow-demo"
  }

  remote_write {
    url = "https://prometheus-us-central1.grafana.net/api/prom/push"
    basic_auth {
      username = "12345"
      password = "password"
    }
  }
}

metrics remote_write "rw2" {
  external_labels = {
    cluster = "flow-demo-scrape-2"
  }

  remote_write {
    url = "https://prometheus-us-central1.grafana.net/api/prom/push"
    basic_auth {
      username = "12345"
      password = "password"
    }
  }
}